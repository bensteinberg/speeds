<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <title>Speeds</title>
  </head>
  <body>
    <canvas id="speedChart" width="400" height="200"></canvas>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.bundle.min.js"></script>
    <script>
      var ctx = document.getElementById('speedChart').getContext('2d');
      var speedChart = new Chart(ctx, {
	  type: 'line',
	  data: {
              datasets: [
              {%- for location in objects -%}
              {%- for direction in ['upload', 'download'] -%}
                  {
                      label: "{{ location + ' ' + direction }}",
                      backgroundColor: "{{ colors[location][direction] }}",
		      borderColor: "{{ colors[location][direction] }}",
		      fill: false,
                      data:               [
                  {%- for item in objects[location] -%}
                  {
                      x: "{{ item['timestamp'] }}",
                      y: {{ item[direction] }}
                  },
                  {% endfor %}
              ],

                  },
              {%- endfor -%}
              {%- endfor -%}
              ],
          },
	  options: {
	      responsive: true,
              title: {
                  display: true,
                  text: 'Speeds'
              },
              tooltips: {
                  mode: 'index',
                  intersect: false,
              },
              hover: {
                  mode: 'nearest',
                  intersect: true
              },
              scales: {
                  xAxes: [{
                      display: true,
		      type: 'time',
		      time: {
                          unit: 'day'
                      },
                  }],
                  yAxes: [{
                      display: true,
                      scaleLabel: {
                          display: true,
                          labelString: 'Speed (Mbps)'
                      }
                  }]
	      }
	  }
      });
    </script>
  </body>
</html>
